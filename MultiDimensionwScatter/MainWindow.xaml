<Window x:Class="MultiDimensionwScatter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MultiDimensionwScatter"
        xmlns:ht="http://helix-toolkit.org/wpf"
        xmlns:ht2="clr-namespace:HelixToolkit.Wpf;assembly=HelixToolkit.Wpf"
        mc:Ignorable="d"
        Title="3D Gaussian Mixture Scatter"
        Height="700"
        Width="1300">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="700" />
        </Grid.ColumnDefinitions>
        <!-- Plot Area -->
        <Grid Grid.Column="0"
              Background="White">
            <ht:HelixViewport3D Name="Viewport"
                                ShowCameraInfo="False"
                                ShowFieldOfView="False"
                                ZoomExtentsWhenLoaded="True"
                                ShowViewCube="False">
                <!-- ライトを追加 -->
                <ht:DefaultLights />
                <!-- X 軸 -->
                <ht:LinesVisual3D Points="0,0,0 5,0,0"
                                  Thickness="4"
                                  Color="Red" />
                <!-- Y 軸 -->
                <ht:LinesVisual3D Points="0,0,0 0,5,0"
                                  Thickness="4"
                                  Color="Green" />
                <!-- Z 軸 -->
                <ht:LinesVisual3D Points="0,0,0 0,0,5"
                                  Thickness="4"
                                  Color="Blue" />
            </ht:HelixViewport3D>
        </Grid>
        <!-- Parameter Panel -->
        <DockPanel Grid.Column="1"
                   LastChildFill="True"
                   Background="#FAFAFA">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <StackPanel DockPanel.Dock="Top"
                                Margin="10"
                                Orientation="Vertical">
                        <TextBlock Text="Mixture Components"
                                   FontWeight="Bold"
                                   FontSize="16" />
                        <StackPanel Orientation="Horizontal"
                                    Margin="0,6,0,8">
                            <Button Name="BtnAdd"
                                    Content="追加"
                                    Width="70"
                                    Margin="0,0,6,0"
                                    Click="BtnAdd_Click" />
                            <Button Name="BtnRemove"
                                    Content="削除"
                                    Width="70"
                                    Click="BtnRemove_Click" />
                            <StackPanel Orientation="Horizontal"
                                        Margin="16,0,0,0"
                                        VerticalAlignment="Center">
                                <TextBlock Text="Point Size:"
                                           VerticalAlignment="Center"
                                           Margin="0,0,6,0" />
                                <TextBox Name="TxtPointSize"
                                         Width="60"
                                         Text="1.5" />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                    <DataGrid Name="GridComponents"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              Margin="10"
                              SelectionMode="Single"
                              HeadersVisibility="Column"
                              IsReadOnly="False"
                              MaxHeight="350">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Weight"
                                                Binding="{Binding Weight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F4}"
                                                Width="70" />
                            <DataGridTextColumn Header="Mean X"
                                                Binding="{Binding MeanX, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="70" />
                            <DataGridTextColumn Header="Mean Y"
                                                Binding="{Binding MeanY, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="70" />
                            <DataGridTextColumn Header="Mean Z"
                                                Binding="{Binding MeanZ, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="70" />
                            <DataGridTextColumn Header="C11"
                                                Binding="{Binding C11, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C12"
                                                Binding="{Binding C12, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C13"
                                                Binding="{Binding C13, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C22"
                                                Binding="{Binding C22, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C23"
                                                Binding="{Binding C23, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C33"
                                                Binding="{Binding C33, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="#Samples"
                                                Binding="{Binding SampleCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                Width="70" />
                        </DataGrid.Columns>
                    </DataGrid>
                    <StackPanel DockPanel.Dock="Bottom"
                                Margin="10"
                                Orientation="Vertical">
                        <StackPanel Orientation="Horizontal"
                                    Margin="0,0,0,8">
                            <TextBlock Text="Seed:"
                                       VerticalAlignment="Center"
                                       Margin="0,0,6,0" />
                            <TextBox Name="TxtSeed"
                                     Width="100"
                                     Text="12345" />
                            <Button Name="BtnRandomizeSeed"
                                    Content="Random"
                                    Margin="8,0,0,0"
                                    Width="70"
                                    Click="BtnRandomizeSeed_Click" />
                            <TextBlock Text="  Total Samples:"
                                       VerticalAlignment="Center"
                                       Margin="16,0,6,0" />
                            <TextBox Name="TxtTotalSamples"
                                     Width="100"
                                     Text="0" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Button Name="BtnGenerate"
                                    Content="サンプル生成・描画"
                                    Width="180"
                                    Height="32"
                                    Click="BtnGenerate_Click" />
                            <Button Name="BtnClear"
                                    Content="クリア"
                                    Width="80"
                                    Height="32"
                                    Margin="8,0,0,0"
                                    Click="BtnClear_Click" />
                        </StackPanel>

                        <!-- Volume controls -->
                        <Separator Margin="0,12,0,8" />
                        <TextBlock Text="Volume (Analytic GMM Density)" FontWeight="Bold" />
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                            <TextBlock Text="Resolution:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <TextBox Name="TxtVolRes" Width="60" Text="64"/>
                            <TextBlock Text="  Bounds ±σ:" VerticalAlignment="Center" Margin="12,0,6,0"/>
                            <TextBox Name="TxtSigmaK" Width="40" Text="3"/>
                            <Button Name="BtnGenVol" Content="ボリューム生成" Width="120" Margin="12,0,0,0" Click="BtnGenVol_Click"/>
                            <Button Name="BtnClearVol" Content="ボリューム消去" Width="120" Margin="6,0,0,0" Click="BtnClearVol_Click"/>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" Margin="0,6,0,0">
                            <TextBlock Text="Slices (X/Y/Z)" />
                            <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                <Slider Name="SliderX" Minimum="0" Maximum="63" Value="32" Width="110" Margin="0,0,6,0" ValueChanged="SliderX_ValueChanged"/>
                                <Slider Name="SliderY" Minimum="0" Maximum="63" Value="32" Width="110" Margin="0,0,6,0" ValueChanged="SliderY_ValueChanged"/>
                                <Slider Name="SliderZ" Minimum="0" Maximum="63" Value="32" Width="110" ValueChanged="SliderZ_ValueChanged"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </DockPanel>
    </Grid>
</Window>
