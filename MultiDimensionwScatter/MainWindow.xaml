<Window x:Class="MultiDimensionwScatter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MultiDimensionwScatter"
        xmlns:sdx="http://helix-toolkit.org/wpf/SharpDX"
        mc:Ignorable="d"
        Title="3D Gaussian Mixture Scatter"
        Height="700"
        Width="1300">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="700" />
        </Grid.ColumnDefinitions>
        <!-- Plot Area (SharpDX) -->
        <Grid Grid.Column="0"
              Background="White">

            <sdx:Viewport3DX x:Name="Viewport"
                             ShowCoordinateSystem="True"
                             ShowViewCube="True"
                             ZoomExtentsWhenLoaded="True"
                             EffectsManager="{Binding EffectsManager}">
                <sdx:Viewport3DX.Camera>
                    <sdx:PerspectiveCamera Position="10,10,10"
                                           LookDirection="-10,-10,-10"
                                           UpDirection="0,1,0"
                                           FieldOfView="60" />
                </sdx:Viewport3DX.Camera>

                <sdx:DirectionalLight3D Direction="-1,-1,-1"
                                        Color="White" />

                <!-- Axes -->
                <sdx:LineGeometryModel3D x:Name="AxisXModel"
                                         Color="Red"
                                         Thickness="1.0" />
                <sdx:LineGeometryModel3D x:Name="AxisYModel"
                                         Color="LimeGreen"
                                         Thickness="1.0" />
                <sdx:LineGeometryModel3D x:Name="AxisZModel"
                                         Color="DodgerBlue"
                                         Thickness="1.0" />

                <!-- モデルカラーは白にしておく -->
                <sdx:PointGeometryModel3D x:Name="ScatterModel"
                                          Geometry="{Binding ScatterGeometry}"
                                          Size="1.5 1.5"
                                          Figure="Ellipse"
                                          Color="White" />
                <sdx:DirectionalLight3D Direction="-1,-1,-1"
                                        Color="White" />
            </sdx:Viewport3DX>
        </Grid>
        <!-- Parameter Panel -->
        <DockPanel Grid.Column="1"
                   LastChildFill="True"
                   Background="#FAFAFA">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <StackPanel DockPanel.Dock="Top"
                                Margin="10"
                                Orientation="Vertical">
                        <TextBlock Text="Mixture Components"
                                   FontWeight="Bold"
                                   FontSize="16" />
                        <StackPanel Orientation="Horizontal"
                                    Margin="0,6,0,8">
                            <Button Name="BtnAdd"
                                    Content="追加"
                                    Width="70"
                                    Margin="0,0,6,0"
                                    Click="BtnAdd_Click" />
                            <Button Name="BtnRemove"
                                    Content="削除"
                                    Width="70"
                                    Click="BtnRemove_Click" />
                            <StackPanel Orientation="Horizontal"
                                        Margin="16,0,0,0"
                                        VerticalAlignment="Center">
                                <TextBlock Text="Point Size:"
                                           VerticalAlignment="Center"
                                           Margin="0,0,6,0" />
                                <TextBox Name="TxtPointSize"
                                         Width="60"
                                         Text="1.5" />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                    <DataGrid Name="GridComponents"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              Margin="10"
                              SelectionMode="Single"
                              HeadersVisibility="Column"
                              IsReadOnly="False"
                              MaxHeight="350">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Weight"
                                                Binding="{Binding Weight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F4}"
                                                Width="70" />
                            <DataGridTextColumn Header="Mean X"
                                                Binding="{Binding MeanX, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="70" />
                            <DataGridTextColumn Header="Mean Y"
                                                Binding="{Binding MeanY, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="70" />
                            <DataGridTextColumn Header="Mean Z"
                                                Binding="{Binding MeanZ, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="70" />
                            <DataGridTextColumn Header="C11"
                                                Binding="{Binding C11, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C12"
                                                Binding="{Binding C12, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C13"
                                                Binding="{Binding C13, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C22"
                                                Binding="{Binding C22, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C23"
                                                Binding="{Binding C23, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="C33"
                                                Binding="{Binding C33, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F3}"
                                                Width="60" />
                            <DataGridTextColumn Header="#Samples"
                                                Binding="{Binding SampleCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                Width="70" />
                        </DataGrid.Columns>
                    </DataGrid>
                    <StackPanel DockPanel.Dock="Bottom"
                                Margin="10"
                                Orientation="Vertical">
                        <StackPanel Orientation="Horizontal"
                                    Margin="0,0,0,8">
                            <TextBlock Text="Seed:"
                                       VerticalAlignment="Center"
                                       Margin="0,0,6,0" />
                            <TextBox Name="TxtSeed"
                                     Width="100"
                                     Text="12345" />
                            <Button Name="BtnRandomizeSeed"
                                    Content="Random"
                                    Margin="8,0,0,0"
                                    Width="70"
                                    Click="BtnRandomizeSeed_Click" />
                            <TextBlock Text="  Total Samples:"
                                       VerticalAlignment="Center"
                                       Margin="16,0,6,0" />
                            <TextBox Name="TxtTotalSamples"
                                     Width="100"
                                     Text="0" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Button Name="BtnGenerate"
                                    Content="サンプル生成・描画"
                                    Width="180"
                                    Height="32"
                                    Click="BtnGenerate_Click" />
                            <Button Name="BtnClear"
                                    Content="クリア"
                                    Width="80"
                                    Height="32"
                                    Margin="8,0,0,0"
                                    Click="BtnClear_Click" />
                            <!-- 共分散ランダム生成ボタン -->
                            <Button Name="BtnRandomCov"
                                    Content="共分散をランダム生成"
                                    Width="180"
                                    Height="32"
                                    Margin="8,0,0,0"
                                    Click="BtnRandomCov_Click" />
                            <!-- 平均ランダム化ボタン -->
                            <Button Name="BtnRandomMean"
                                    Content="平均をランダム化"
                                    Width="150"
                                    Height="32"
                                    Margin="8,0,0,0"
                                    Click="BtnRandomMean_Click" />
                        </StackPanel>
                        <!-- 2D Projections -->
                        <Separator Margin="0,12,0,8" />
                        <TextBlock Text="2D Projections (Non-interactive)" FontWeight="Bold" />
                        <UniformGrid Columns="3" Margin="0,6,0,0">
                            <StackPanel Margin="0,0,6,0">
                                <TextBlock Text="XY (view Z)" HorizontalAlignment="Center" />
                                <Border Width="210" Height="210" Background="White" BorderBrush="#DDDDDD" BorderThickness="1">
                                    <Image x:Name="ImgXY" Stretch="Fill" />
                                </Border>
                            </StackPanel>
                            <StackPanel Margin="0,0,6,0">
                                <TextBlock Text="XZ (view Y)" HorizontalAlignment="Center" />
                                <Border Width="210" Height="210" Background="White" BorderBrush="#DDDDDD" BorderThickness="1">
                                    <Image x:Name="ImgXZ" Stretch="Fill" />
                                </Border>
                            </StackPanel>
                            <StackPanel>
                                <TextBlock Text="YZ (view X)" HorizontalAlignment="Center" />
                                <Border Width="210" Height="210" Background="White" BorderBrush="#DDDDDD" BorderThickness="1">
                                    <Image x:Name="ImgYZ" Stretch="Fill" />
                                </Border>
                            </StackPanel>
                        </UniformGrid>
                        <!-- Camera View Controls -->
                        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                            <TextBlock Text="Camera View:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <Button Name="BtnViewXY"
                                    Content="XY視点(Z方向)"
                                    Width="120"
                                    Height="28"
                                    Margin="0,0,6,0"
                                    Click="BtnViewXY_Click" />
                            <Button Name="BtnViewXZ"
                                    Content="XZ視点(Y方向)"
                                    Width="120"
                                    Height="28"
                                    Margin="0,0,6,0"
                                    Click="BtnViewXZ_Click"/>
                            <Button Name="BtnViewYZ"
                                    Content="YZ視点(X方向)"
                                    Width="120"
                                    Height="28"
                                    Click="BtnViewYZ_Click"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </DockPanel>
    </Grid>
</Window>
